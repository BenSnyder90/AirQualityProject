{% extends 'base.html' %}

{% block title %}
  map page
{% endblock %}

{% block content %}
<div class="container">
  <div class="row">
    <div class="col-2 sidebar">
      <button type="button" class="btn btn-primary">cities</button>
      <button type="button" class="btn btn-primary">pollutants</button>
    </div>
    <div class="col-10" id="map"></div>
  </div>
</div>


<script>
  // Create a map object
  const API_KEY = "pk.eyJ1IjoidG9tc2VlYmVyIiwiYSI6ImNqem94N2s4NjAwNmYzaGxhOXo1a2hnd2cifQ.0xdFq99WPAZyCeZYyXzYWQ";
 var myMap = L.map("map", {
     center: [37.09, -95.71],
     zoom: 4
   });
   
   // Add a tile layer
   L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}", {
     attribution: "Map data &copy; <a href=\"https://www.openstreetmap.org/\">OpenStreetMap</a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, Imagery Â© <a href=\"https://www.mapbox.com/\">Mapbox</a>",
     maxZoom: 18,
     id: "mapbox.streets",
     accessToken: API_KEY
   }).addTo(myMap);
   
  `{% for aj in j %}`
       L.marker([`{{aj.lat}}`,`{{aj.lon}}`])
        .bindPopup("<h4>" + `{{aj.city}}` + "</h4> <hr> <h5>AQI " + `{{aj.aqi}}` + "</h5>")
        .addTo(myMap);
   `{% endfor %}`

</script>
{% endblock %}